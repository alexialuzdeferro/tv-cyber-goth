<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CYBER-GOTH TV 4.0</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
        
        :root {
            --neon-green: #00ff41;
            --neon-purple: #ff00ff;
            --neon-cyan: #00ffff;
            --neon-red: #ff0000;
            --dark-bg: #0a0a0a;
        }
        
        body { 
            background: radial-gradient(circle at center, #000000 0%, #0a0a0a 70%, #1a001a 100%);
            color: var(--neon-green);
            font-family: 'Share Tech Mono', monospace;
            height: 100vh;
            margin: 0;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* Mobile-first responsive design */
        @media (max-width: 768px) {
            .mobile-hidden {
                display: none;
            }
            .mobile-only {
                display: block;
            }
            .mobile-flex-col {
                flex-direction: column;
            }
        }

        @media (min-width: 769px) {
            .mobile-only {
                display: none;
            }
        }

        /* CRT Screen Effects - Mobile Optimized */
        .crt-screen {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 
                inset 0 0 60px rgba(0,0,0,0.9),
                0 0 40px rgba(0,255,65,0.1),
                0 0 100px rgba(0,0,0,0.8);
            background: #000;
            aspect-ratio: 16/9;
            width: 100%;
        }

        .scanlines {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(
                to bottom,
                transparent 50%,
                rgba(0,0,0,0.3) 50%
            );
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 10;
        }

        /* Efeito de Vignette */
        .vignette {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(
                ellipse at center,
                rgba(0,0,0,0) 60%,
                rgba(0,0,0,0.7) 100%
            );
            pointer-events: none;
            z-index: 9;
        }

        /* Efeito de Est√°tica - Performance Mobile */
        .static-noise {
            position: absolute;
            top: -50%; left: -50%; right: -50%; bottom: -50%;
            width: 200%; height: 200vh;
            background: repeating-linear-gradient(
                0deg,
                rgba(255,255,255,0.05) 0px,
                rgba(255,255,255,0.03) 1px,
                transparent 1px,
                transparent 2px
            );
            opacity: 0;
            pointer-events: none;
            z-index: 5;
        }

        /* Efeitos de Explos√£o Otimizados */
        @keyframes explosion {
            0%, 100% { 
                filter: hue-rotate(0deg) brightness(1) blur(0);
                transform: scale(1);
            }
            20% { 
                filter: hue-rotate(120deg) brightness(3) blur(2px);
                transform: scale(1.1);
            }
            40% { 
                filter: hue-rotate(240deg) brightness(5) blur(4px);
                transform: scale(1.2);
            }
            60% { 
                filter: hue-rotate(360deg) brightness(8) blur(2px);
                transform: scale(1.1);
            }
            80% { 
                filter: hue-rotate(480deg) brightness(4) blur(1px);
                transform: scale(1.05);
            }
        }

        @keyframes dangerPulse {
            0%, 100% { 
                box-shadow: 
                    0 0 10px var(--neon-red),
                    0 0 20px var(--neon-red),
                    inset 0 0 10px rgba(255,0,0,0.3);
            }
            50% { 
                box-shadow: 
                    0 0 20px var(--neon-red),
                    0 0 40px var(--neon-red),
                    0 0 60px var(--neon-red),
                    inset 0 0 20px rgba(255,0,0,0.5);
            }
        }

        /* Bot√µes Touch-friendly */
        .touch-button {
            position: relative;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            transition: all 0.1s ease;
            min-width: 44px;
            min-height: 44px;
        }

        .touch-button:active {
            transform: scale(0.95);
            filter: brightness(1.5);
        }

        /* Bot√£o Nuclear Especial */
        .nuclear-btn {
            background: linear-gradient(45deg, #ff0000, #ff3300, #ff6600);
            background-size: 300% 300%;
            box-shadow: 
                0 0 20px rgba(255,0,0,0.5),
                0 0 40px rgba(255,51,0,0.3),
                inset 0 0 10px rgba(255,255,255,0.2);
            border: 2px solid rgba(255,0,0,0.8);
            position: relative;
            overflow: hidden;
        }

        .nuclear-btn::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: conic-gradient(
                from 0deg,
                transparent,
                rgba(255,0,0,0.8),
                transparent
            );
            animation: rotate 3s linear infinite;
            z-index: -1;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* LED Indicators */
        .led {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
            margin: 0 2px;
            box-shadow: 0 0 5px currentColor;
        }

        .led-green { background-color: var(--neon-green); }
        .led-red { background-color: var(--neon-red); }
        .led-purple { background-color: var(--neon-purple); }
        .led-cyan { background-color: var(--neon-cyan); }
        .led-yellow { background-color: #ffff00; }

        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.3);
            border-radius: 4px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, var(--neon-green), var(--neon-cyan));
            border-radius: 4px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(to bottom, var(--neon-cyan), var(--neon-green));
        }

        /* Safe Area for Notch Phones */
        @supports (padding: max(0px)) {
            .safe-top {
                padding-top: max(1rem, env(safe-area-inset-top));
            }
            .safe-bottom {
                padding-bottom: max(1rem, env(safe-area-inset-bottom));
            }
        }

        /* Performance optimizations */
        .will-change-transform {
            will-change: transform;
        }

        /* Gesture zone for mobile */
        .gesture-zone {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 20%;
            z-index: 20;
        }

        .gesture-left {
            left: 0;
        }

        .gesture-right {
            right: 0;
        }

        /* Modal de Playlist */
        .playlist-modal {
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            border: 2px solid var(--neon-green);
            box-shadow: 0 0 50px rgba(0, 255, 65, 0.3);
            animation: modalAppear 0.3s ease-out;
        }

        @keyframes modalAppear {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .playlist-item {
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
        }

        .playlist-item:hover {
            background: rgba(0, 255, 65, 0.1);
            border-left-color: var(--neon-green);
            transform: translateX(5px);
        }

        .playlist-item.active {
            background: rgba(0, 255, 65, 0.15);
            border-left-color: var(--neon-cyan);
            box-shadow: inset 0 0 10px rgba(0, 255, 65, 0.2);
        }

        /* Glitch Effect for Active Item */
        @keyframes glitch {
            0% { text-shadow: 1px 0 var(--neon-purple), -1px 0 var(--neon-cyan); }
            50% { text-shadow: -1px 0 var(--neon-purple), 1px 0 var(--neon-cyan); }
            100% { text-shadow: 1px 0 var(--neon-purple), -1px 0 var(--neon-cyan); }
        }

        .glitch-text {
            animation: glitch 0.3s infinite;
        }

        /* Close button */
        .close-btn {
            background: rgba(255, 0, 0, 0.2);
            border: 1px solid var(--neon-red);
            transition: all 0.2s ease;
        }

        .close-btn:hover {
            background: rgba(255, 0, 0, 0.4);
            transform: rotate(90deg);
        }

        /* Responsive playlist */
        @media (max-width: 768px) {
            .playlist-modal {
                width: 95vw;
                max-height: 80vh;
                margin: 10vh auto;
            }
            
            .playlist-item {
                padding: 10px 12px;
                font-size: 14px;
            }
        }

        @media (min-width: 769px) {
            .playlist-modal {
                width: 500px;
                max-height: 70vh;
                margin: 15vh auto;
            }
            
            .playlist-item {
                padding: 12px 16px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body class="safe-top safe-bottom">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;

        // Lista COMPLETA das 30 m√∫sicas exatamente como solicitado
        const videos = [
            { id: '-HeCgOiirV4', title: 'Ritual Inicial', duration: '3:45', playing: false },
            { id: 'tBpQ1f77PDA', title: 'The Perfect Girl', duration: '2:45', playing: false },
            { id: 'h4Jnv-pb6sk', title: 'Silhouette', duration: '4:20', playing: false },
            { id: 'A_ZJnKoMoBA', title: 'After Dark', duration: '4:50', playing: false },
            { id: '9CvpeDHgCpo', title: 'Goth', duration: '3:30', playing: false },
            { id: 'LHUz8vA_wCM', title: 'Sudno', duration: '2:22', playing: false },
            { id: 'bIGoN8_vv_Y', title: 'Little Dark Age', duration: '4:00', playing: false },
            { id: 'npQwX2X3WBE', title: 'Resonance', duration: '3:42', playing: false },
            { id: 'qLQ0PZ-Zwc8', title: 'Vampire', duration: '3:15', playing: false },
            { id: 'bjxfcGJM3V4', title: 'Dark Beach', duration: '3:45', playing: false },
            { id: 'DOzdBjtA9H0', title: 'Nightcall', duration: '4:20', playing: false },
            { id: 'qFtiH1bZuJ0', title: 'SimpsonWave', duration: '3:00', playing: false },
            { id: 'FaHMRB30HmA', title: 'Gallowdance', duration: '3:30', playing: false },
            { id: 'VdAlPCrndT8', title: 'Crimson', duration: '4:10', playing: false },
            { id: 'gebchYvcp2s', title: 'Shadows', duration: '3:55', playing: false },
            { id: '77GxLUUEcHo', title: 'Insomnia', duration: '4:05', playing: false },
            { id: 'bYM8iPn47yE', title: 'Eternal', duration: '3:40', playing: false },
            { id: 'bpxKOOUhLs8', title: 'Void', duration: '3:25', playing: false },
            { id: 'y0AaKrZLFQo', title: 'Kletka', duration: '3:10', playing: false },
            { id: 'LVQi3iyx_Hc', title: 'Tears', duration: '3:50', playing: false },
            { id: 'ElcwzDwdYkA', title: 'Tancevat', duration: '3:20', playing: false },
            { id: 'F3VwhAe7Ks0', title: 'Gorod', duration: '3:35', playing: false },
            { id: 'mwooX2qXrwE', title: 'Calm Night', duration: '4:15', playing: false },
            { id: 'lAt6qFZby5w', title: 'Tancuy', duration: '3:28', playing: false },
            { id: 'Wj1r0bU3pkg', title: 'Passion', duration: '3:45', playing: false },
            { id: '5zS9CbU1gxY', title: 'Things I Don\'t Need', duration: '3:55', playing: false },
            { id: 'pO4lvJUwrwk', title: 'Babes of the 80s', duration: '3:40', playing: false },
            { id: 'X8wAX8uZHi8', title: 'Kasvetli Kutlama', duration: '3:25', playing: false },
            { id: '4AcNJQYb0Rw', title: 'Pain', duration: '4:00', playing: false },
            { id: '6170iawsQHE', title: 'The Perfect Girl (Alt)', duration: '2:50', playing: false }
        ];

        // Componentes de √çcones Otimizados
        const IconPower = ({ size = 24, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M18.36 6.64a9 9 0 1 1-12.73 0"/>
                <line x1="12" y1="2" x2="12" y2="12"/>
            </svg>
        );

        const IconPlay = ({ size = 24, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <polygon points="5 3 19 12 5 21 5 3"/>
            </svg>
        );

        const IconPause = ({ size = 24, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <rect x="6" y="4" width="4" height="16"/>
                <rect x="14" y="4" width="4" height="16"/>
            </svg>
        );

        const IconSkipNext = ({ size = 24, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <polygon points="5 4 15 12 5 20 5 4"/>
                <line x1="19" y1="5" x2="19" y2="19"/>
            </svg>
        );

        const IconSkipPrev = ({ size = 24, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <polygon points="19 4 9 12 19 20 19 4"/>
                <line x1="5" y1="5" x2="5" y2="19"/>
            </svg>
        );

        const IconShuffle = ({ size = 24, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <polyline points="16 3 21 3 21 8"/>
                <polyline points="4 20 21 3"/>
                <polyline points="21 16 21 21 16 21"/>
                <polyline points="15 15 21 21"/>
                <polyline points="4 4 9 9"/>
            </svg>
        );

        const IconPlaylist = ({ size = 24, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <line x1="8" y1="6" x2="21" y2="6"/>
                <line x1="8" y1="12" x2="21" y2="12"/>
                <line x1="8" y1="18" x2="21" y2="18"/>
                <line x1="3" y1="6" x2="3" y2="6"/>
                <line x1="3" y1="12" x2="3" y2="12"/>
                <line x1="3" y1="18" x2="3" y2="18"/>
            </svg>
        );

        const IconNuclear = ({ size = 24, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <circle cx="12" cy="12" r="10"/>
                <circle cx="12" cy="12" r="4"/>
                <line x1="12" y1="2" x2="12" y2="6"/>
                <line x1="12" y1="18" x2="12" y2="22"/>
                <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"/>
                <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"/>
                <line x1="2" y1="12" x2="6" y2="12"/>
                <line x1="18" y1="12" x2="22" y2="12"/>
                <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"/>
                <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"/>
            </svg>
        );

        const IconVolume = ({ size = 24, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                <path d="M15.54 8.46a5 5 0 0 1 0 7.07"/>
            </svg>
        );

        const IconMenu = ({ size = 24, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <line x1="3" y1="12" x2="21" y2="12"/>
                <line x1="3" y1="6" x2="21" y2="6"/>
                <line x1="3" y1="18" x2="21" y2="18"/>
            </svg>
        );

        const IconClose = ({ size = 24, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
        );

        const IconList = ({ size = 24, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <line x1="8" y1="6" x2="21" y2="6"/>
                <line x1="8" y1="12" x2="21" y2="12"/>
                <line x1="8" y1="18" x2="21" y2="18"/>
                <circle cx="4" cy="6" r="1"/>
                <circle cx="4" cy="12" r="1"/>
                <circle cx="4" cy="18" r="1"/>
            </svg>
        );

        // Componente do Modal de Playlist
        function PlaylistModal({ isOpen, onClose, videos, currentChannel, onSelectTrack }) {
            if (!isOpen) return null;

            return ReactDOM.createPortal(
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm">
                    <div className="playlist-modal rounded-xl overflow-hidden w-full max-w-2xl">
                        {/* Header do Modal */}
                        <div className="bg-gradient-to-r from-green-900/50 to-cyan-900/50 p-4 border-b border-green-500/50 flex justify-between items-center">
                            <div className="flex items-center gap-3">
                                <div className="p-2 rounded-lg bg-green-900/30">
                                    <IconList className="w-6 h-6 text-green-400" />
                                </div>
                                <div>
                                    <h2 className="text-xl font-bold text-green-400">PLAYLIST COMPLETA</h2>
                                    <p className="text-sm text-gray-400">30 TRACKS CYBER-GOTH</p>
                                </div>
                            </div>
                            <button
                                onClick={onClose}
                                className="close-btn w-10 h-10 rounded-full flex items-center justify-center hover:bg-red-900/30"
                            >
                                <IconClose className="w-5 h-5 text-red-400" />
                            </button>
                        </div>

                        {/* Lista de M√∫sicas */}
                        <div className="max-h-[60vh] overflow-y-auto custom-scrollbar p-2">
                            {videos.map((video, index) => (
                                <div
                                    key={video.id}
                                    className={`playlist-item rounded-lg mb-1 cursor-pointer flex items-center justify-between ${index === currentChannel ? 'active' : ''}`}
                                    onClick={() => {
                                        onSelectTrack(index);
                                        onClose();
                                    }}
                                >
                                    <div className="flex items-center gap-3">
                                        <div className={`w-8 h-8 rounded-full flex items-center justify-center ${index === currentChannel ? 'bg-green-500/20' : 'bg-gray-800'}`}>
                                            <span className={`text-sm font-bold ${index === currentChannel ? 'text-green-400 glitch-text' : 'text-gray-400'}`}>
                                                {String(index + 1).padStart(2, '0')}
                                            </span>
                                        </div>
                                        <div>
                                            <div className={`font-medium ${index === currentChannel ? 'text-cyan-300' : 'text-gray-300'}`}>
                                                {video.title}
                                                {index === currentChannel && (
                                                    <span className="ml-2 text-xs px-2 py-1 bg-green-500/20 text-green-400 rounded">PLAYING</span>
                                                )}
                                            </div>
                                            <div className="text-xs text-gray-500">{video.duration}</div>
                                        </div>
                                    </div>
                                    <div className="text-xs text-gray-500 font-mono">
                                        CH {String(index + 1).padStart(2, '0')}
                                    </div>
                                </div>
                            ))}
                        </div>

                        {/* Footer do Modal */}
                        <div className="bg-black/50 p-3 border-t border-gray-800">
                            <div className="flex justify-between items-center text-sm">
                                <div className="text-gray-400">
                                    <span className="text-green-400 font-bold">{currentChannel + 1}</span> de {videos.length} tracks
                                </div>
                                <div className="text-gray-500">
                                    Click para selecionar track
                                </div>
                            </div>
                        </div>
                    </div>
                </div>,
                document.body
            );
        }

        function App() {
            const [isOn, setIsOn] = useState(true);
            const [currentChannel, setCurrentChannel] = useState(0);
            const [volume, setVolume] = useState(70);
            const [tracking, setTracking] = useState(0);
            const [showStatic, setShowStatic] = useState(false);
            const [isPlaying, setIsPlaying] = useState(true);
            const [isShuffle, setIsShuffle] = useState(false);
            const [explosionMode, setExplosionMode] = useState(false);
            const [showPlaylistModal, setShowPlaylistModal] = useState(false);
            const [playlistActive, setPlaylistActive] = useState(false);
            const [playlistProgress, setPlaylistProgress] = useState(0);
            const [playerReady, setPlayerReady] = useState(false);
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
            const [currentTime, setCurrentTime] = useState(0);
            const playerRef = useRef(null);
            const playlistInterval = useRef(null);

            // Detectar dispositivo m√≥vel
            const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);
            
            useEffect(() => {
                const handleResize = () => {
                    setIsMobile(window.innerWidth <= 768);
                };
                
                window.addEventListener('resize', handleResize);
                return () => window.removeEventListener('resize', handleResize);
            }, []);

            // Inicializar YouTube Player
            useEffect(() => {
                if (!window.YT) {
                    const tag = document.createElement('script');
                    tag.src = "https://www.youtube.com/iframe_api";
                    const firstScriptTag = document.getElementsByTagName('script')[0];
                    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
                }

                window.onYouTubeIframeAPIReady = () => {
                    playerRef.current = new window.YT.Player('player', {
                        height: '100%',
                        width: '100%',
                        videoId: videos[0].id,
                        playerVars: {
                            'autoplay': 1,
                            'controls': 0,
                            'disablekb': 1,
                            'fs': 0,
                            'modestbranding': 1,
                            'rel': 0,
                            'showinfo': 0,
                            'iv_load_policy': 3
                        },
                        events: {
                            'onReady': () => {
                                setPlayerReady(true);
                                playerRef.current.setVolume(volume);
                                // Atualizar tempo atual periodicamente
                                setInterval(() => {
                                    if (playerRef.current && playerRef.current.getCurrentTime) {
                                        setCurrentTime(playerRef.current.getCurrentTime());
                                    }
                                }, 1000);
                            },
                            'onStateChange': (event) => {
                                if (event.data === window.YT.PlayerState.ENDED) {
                                    handleNext();
                                }
                                if (event.data === window.YT.PlayerState.PLAYING) {
                                    setIsPlaying(true);
                                } else if (event.data === window.YT.PlayerState.PAUSED) {
                                    setIsPlaying(false);
                                }
                            }
                        }
                    });
                };
            }, []);

            // Efeitos de Explos√£o Otimizados para Mobile
            useEffect(() => {
                if (explosionMode) {
                    const interval = setInterval(() => {
                        setTracking(Math.random() * 100);
                    }, 150);
                    
                    const timeout = setTimeout(() => {
                        setExplosionMode(false);
                        setTracking(0);
                    }, 3000);

                    return () => {
                        clearInterval(interval);
                        clearTimeout(timeout);
                    };
                }
            }, [explosionMode]);

            // Navega√ß√£o por Gestos (Mobile)
            useEffect(() => {
                let touchStartX = 0;
                let touchEndX = 0;

                const handleTouchStart = (e) => {
                    touchStartX = e.changedTouches[0].screenX;
                };

                const handleTouchEnd = (e) => {
                    touchEndX = e.changedTouches[0].screenX;
                    handleSwipe();
                };

                const handleSwipe = () => {
                    const swipeThreshold = 50;
                    const diff = touchStartX - touchEndX;

                    if (Math.abs(diff) > swipeThreshold) {
                        if (diff > 0) {
                            handleNext();
                        } else {
                            handlePrev();
                        }
                    }
                };

                if (isMobile && isOn) {
                    document.addEventListener('touchstart', handleTouchStart);
                    document.addEventListener('touchend', handleTouchEnd);
                }

                return () => {
                    document.removeEventListener('touchstart', handleTouchStart);
                    document.removeEventListener('touchend', handleTouchEnd);
                };
            }, [isMobile, isOn]);

            // Mudar de canal com efeito
            const changeChannel = useCallback((newIndex) => {
                if (!isOn || !playerReady) return;

                setShowStatic(true);
                setTimeout(() => setShowStatic(false), 200);
                
                setCurrentChannel(newIndex);
                playerRef.current.loadVideoById(videos[newIndex].id);
                setIsPlaying(true);

                // Atualizar progresso da playlist
                if (playlistActive) {
                    const progress = ((newIndex + 1) / videos.length) * 100;
                    setPlaylistProgress(progress);
                }
            }, [isOn, playerReady, playlistActive]);

            // Pr√≥xima m√∫sica
            const handleNext = useCallback(() => {
                let newIndex;
                if (isShuffle) {
                    newIndex = Math.floor(Math.random() * videos.length);
                } else {
                    newIndex = (currentChannel + 1) % videos.length;
                }
                changeChannel(newIndex);
            }, [currentChannel, isShuffle, changeChannel]);

            // M√∫sica anterior
            const handlePrev = useCallback(() => {
                let newIndex;
                if (isShuffle) {
                    newIndex = Math.floor(Math.random() * videos.length);
                } else {
                    newIndex = (currentChannel - 1 + videos.length) % videos.length;
                }
                changeChannel(newIndex);
            }, [currentChannel, isShuffle, changeChannel]);

            // Tocar/Pausar
            const togglePlay = useCallback(() => {
                if (!playerReady) return;
                if (isPlaying) {
                    playerRef.current.pauseVideo();
                } else {
                    playerRef.current.playVideo();
                }
                setIsPlaying(!isPlaying);
            }, [playerReady, isPlaying]);

            // Ligar/Desligar
            const togglePower = useCallback(() => {
                if (!playerReady) return;
                if (isOn) {
                    playerRef.current.pauseVideo();
                } else {
                    playerRef.current.playVideo();
                }
                setIsOn(!isOn);
            }, [playerReady, isOn]);

            // Modo Explos√£o
            const toggleExplosion = useCallback(() => {
                setExplosionMode(!explosionMode);
                if (!explosionMode) {
                    setTimeout(() => setExplosionMode(false), 3000);
                }
            }, [explosionMode]);

            // Iniciar Playlist de 30 m√∫sicas autom√°tica
            const startAutoPlaylist = useCallback(() => {
                if (!playerReady) return;
                
                setPlaylistActive(true);
                
                // Embaralhar m√∫sicas
                const shuffled = [...videos].sort(() => Math.random() - 0.5);
                let currentIndex = 0;

                // Tocar primeira m√∫sica
                const firstIndex = videos.findIndex(v => v.id === shuffled[currentIndex].id);
                changeChannel(firstIndex);

                // Limpar intervalo anterior se existir
                if (playlistInterval.current) {
                    clearInterval(playlistInterval.current);
                }

                // Configurar intervalo para pr√≥xima m√∫sicas
                playlistInterval.current = setInterval(() => {
                    currentIndex++;
                    
                    if (currentIndex < shuffled.length) {
                        const nextVideo = shuffled[currentIndex];
                        const nextIndex = videos.findIndex(v => v.id === nextVideo.id);
                        changeChannel(nextIndex);
                    } else {
                        clearInterval(playlistInterval.current);
                        setPlaylistActive(false);
                        setPlaylistProgress(100);
                    }
                }, 180000); // 3 minutos por m√∫sica
            }, [playerReady, changeChannel]);

            // Volume
            const handleVolume = useCallback((e) => {
                const vol = parseInt(e.target.value);
                setVolume(vol);
                if (playerReady) {
                    playerRef.current.setVolume(vol);
                }
            }, [playerReady]);

            // Tracking
            const handleTracking = useCallback((e) => {
                setTracking(parseInt(e.target.value));
            }, []);

            // Abrir modal de playlist
            const openPlaylistModal = useCallback(() => {
                setShowPlaylistModal(true);
            }, []);

            // Fechar modal de playlist
            const closePlaylistModal = useCallback(() => {
                setShowPlaylistModal(false);
            }, []);

            // Selecionar track espec√≠fica
            const selectTrack = useCallback((index) => {
                changeChannel(index);
            }, [changeChannel]);

            // Formatar tempo
            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            };

            // Estilos din√¢micos otimizados
            const videoStyle = {
                filter: explosionMode ? 
                    `hue-rotate(${Math.random() * 360}deg) brightness(${2 + Math.random() * 2}) blur(${Math.random() * 2}px)` :
                    `sepia(${tracking/200}) contrast(${1 + tracking/100}) hue-rotate(${tracking}deg) saturate(${1 + tracking/50})`,
                transform: explosionMode ? `scale(${1 + Math.random() * 0.2})` : 'scale(1)'
            };

            const dangerStyle = explosionMode ? {
                animation: 'explosion 0.5s infinite'
            } : {};

            return (
                <>
                    <div className="relative w-full h-full flex flex-col items-center justify-start p-2 md:p-4 overflow-hidden">
                        
                        {/* Header Mobile */}
                        {isMobile && (
                            <div className="w-full flex justify-between items-center p-3 bg-black/80 backdrop-blur-sm rounded-b-lg border-b border-green-500/30 mb-2">
                                <button 
                                    onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
                                    className="touch-button w-10 h-10 rounded-lg bg-gray-900 flex items-center justify-center"
                                >
                                    {mobileMenuOpen ? 
                                        <IconClose className="w-6 h-6 text-green-400" /> : 
                                        <IconMenu className="w-6 h-6 text-green-400" />
                                    }
                                </button>
                                
                                <div className="text-center">
                                    <div className="text-lg font-bold text-green-400">CYBER-GOTH TV</div>
                                    <div className="text-xs text-gray-400">30 CHANNELS</div>
                                </div>
                                
                                <div className="flex gap-1">
                                    <div className={`led ${isOn ? 'led-green animate-pulse' : 'led-red'}`}></div>
                                    <div className={`led ${explosionMode ? 'led-red danger-pulse' : 'led-cyan'}`}></div>
                                </div>
                            </div>
                        )}

                        {/* Tela CRT - Responsiva */}
                        <div className="crt-screen w-full max-w-6xl my-2 md:my-4">
                            {/* YouTube Player */}
                            <div id="player" className="w-full h-full"></div>
                            
                            {/* Overlays */}
                            <div className="scanlines"></div>
                            <div className="vignette"></div>
                            <div className="static-noise" style={{ opacity: showStatic ? 0.6 : tracking/200 }}></div>
                            
                            {/* Gesture Zones for Mobile */}
                            {isMobile && isOn && (
                                <>
                                    <div className="gesture-zone gesture-left"></div>
                                    <div className="gesture-zone gesture-right"></div>
                                </>
                            )}
                            
                            {/* Display Info - Responsivo */}
                            <div className="absolute top-2 md:top-4 left-2 md:left-4 right-2 md:right-4 flex justify-between items-start z-20">
                                <div className="flex flex-col">
                                    <div className={`text-xl md:text-3xl font-bold ${explosionMode ? 'text-red-500 animate-pulse' : 'text-green-500'}`} style={dangerStyle}>
                                        {isOn ? `CH ${String(currentChannel + 1).padStart(2, '0')}` : 'OFFLINE'}
                                    </div>
                                    <div className="text-sm md:text-xl text-cyan-400 mt-1 md:mt-2 truncate max-w-[70vw] md:max-w-none">
                                        {isOn ? videos[currentChannel].title : 'Sistema Inativo'}
                                    </div>
                                    <div className="text-xs text-gray-400 mt-1">
                                        {formatTime(currentTime)} / {videos[currentChannel].duration}
                                    </div>
                                </div>
                                
                                {/* Status LEDs - Escondido em mobile quando menu aberto */}
                                {(!isMobile || !mobileMenuOpen) && (
                                    <div className="flex flex-col items-end">
                                        <div className="flex gap-1 mb-1 md:mb-2">
                                            <div className={`led ${isOn ? 'led-green animate-pulse' : 'led-red'}`}></div>
                                            <div className={`led ${isPlaying ? 'led-cyan animate-pulse' : 'led-purple'}`}></div>
                                            <div className={`led ${explosionMode ? 'led-red danger-pulse' : 'led-yellow'}`}></div>
                                        </div>
                                        <div className="text-xs text-gray-400 hidden md:block">
                                            {explosionMode ? '‚ö†Ô∏è CRITICAL ‚ö†Ô∏è' : 'Status: Normal'}
                                        </div>
                                    </div>
                                )}
                            </div>
                            
                            {/* Playlist Progress */}
                            {playlistActive && (
                                <div className="absolute bottom-2 md:bottom-4 left-2 md:left-4 right-2 md:right-4 bg-black/90 p-2 md:p-3 rounded-lg border border-green-500/50">
                                    <div className="flex justify-between text-green-400 mb-1 md:mb-2 text-sm">
                                        <span>üéµ PLAYLIST ATIVA - 30 TRACKS</span>
                                        <span>{Math.round(playlistProgress/100 * 30)}/30</span>
                                    </div>
                                    <div className="w-full bg-gray-800 rounded-full h-1.5 md:h-2">
                                        <div 
                                            className="bg-gradient-to-r from-green-500 to-cyan-500 h-full rounded-full transition-all duration-300"
                                            style={{ width: `${playlistProgress}%` }}
                                        ></div>
                                    </div>
                                </div>
                            )}
                        </div>

                        {/* Menu Mobile */}
                        {isMobile && mobileMenuOpen && (
                            <div className="absolute top-20 left-2 right-2 bg-black/95 backdrop-blur-lg rounded-xl border border-green-500/30 z-30 p-4">
                                <div className="space-y-3">
                                    <div className="flex justify-between items-center">
                                        <span className="text-green-400">Volume</span>
                                        <span className="text-cyan-400">{volume}%</span>
                                    </div>
                                    <input
                                        type="range"
                                        min="0"
                                        max="100"
                                        value={volume}
                                        onChange={handleVolume}
                                        className="w-full h-2 bg-gray-800 rounded-lg"
                                    />
                                    
                                    <div className="flex justify-between items-center">
                                        <span className="text-purple-400">Tracking</span>
                                        <span className="text-cyan-400">{tracking}%</span>
                                    </div>
                                    <input
                                        type="range"
                                        min="0"
                                        max="100"
                                        value={tracking}
                                        onChange={handleTracking}
                                        className="w-full h-2 bg-gray-800 rounded-lg"
                                    />
                                    
                                    <button
                                        onClick={() => setIsShuffle(!isShuffle)}
                                        className={`w-full py-3 rounded-lg ${isShuffle ? 'bg-pink-900/50 border-pink-500' : 'bg-gray-800/50 border-gray-600'} border flex items-center justify-center gap-2`}
                                    >
                                        <IconShuffle className="w-5 h-5" />
                                        <span>{isShuffle ? 'SHUFFLE ON' : 'SHUFFLE OFF'}</span>
                                    </button>
                                    
                                    <div className="text-center text-xs text-gray-500 pt-2">
                                        Swipe na tela para trocar m√∫sica
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Painel de Controle Principal */}
                        <div className={`w-full max-w-6xl bg-gray-900/80 backdrop-blur-sm rounded-xl p-3 md:p-6 border border-gray-700 mt-2 md:mt-4 ${isMobile && mobileMenuOpen ? 'opacity-50' : ''}`}>
                            
                            {/* Linha 1: Controles Principais - Responsiva */}
                            <div className="flex flex-wrap gap-2 md:gap-4 mb-4 md:mb-6 justify-center">
                                {/* Bot√£o Power */}
                                <button
                                    onClick={togglePower}
                                    className={`touch-button w-12 h-12 md:w-16 md:h-16 rounded-full flex items-center justify-center ${isOn ? 'bg-red-900/80 border-red-600' : 'bg-gray-800/80 border-gray-600'} border-2 shadow-lg`}
                                >
                                    <IconPower size={isMobile ? 20 : 24} className={`${isOn ? 'text-red-400' : 'text-gray-400'}`} />
                                </button>

                                {/* Bot√£o Play/Pause */}
                                <button
                                    onClick={togglePlay}
                                    className="touch-button w-12 h-12 md:w-16 md:h-16 rounded-full bg-green-900/80 border-green-600 border-2 flex items-center justify-center shadow-lg"
                                >
                                    {isPlaying ? 
                                        <IconPause size={isMobile ? 20 : 24} className="text-green-400" /> : 
                                        <IconPlay size={isMobile ? 20 : 24} className="text-green-400" />
                                    }
                                </button>

                                {/* Bot√µes Anterior/Pr√≥ximo */}
                                <button
                                    onClick={handlePrev}
                                    className="touch-button w-12 h-12 md:w-16 md:h-16 rounded-full bg-purple-900/80 border-purple-600 border-2 flex items-center justify-center shadow-lg"
                                >
                                    <IconSkipPrev size={isMobile ? 20 : 24} className="text-purple-400" />
                                </button>

                                <button
                                    onClick={handleNext}
                                    className="touch-button w-12 h-12 md:w-16 md:h-16 rounded-full bg-purple-900/80 border-purple-600 border-2 flex items-center justify-center shadow-lg"
                                >
                                    <IconSkipNext size={isMobile ? 20 : 24} className="text-purple-400" />
                                </button>

                                {/* Bot√£o Shuffle - Escondido em mobile quando menu aberto */}
                                {(!isMobile || !mobileMenuOpen) && (
                                    <button
                                        onClick={() => setIsShuffle(!isShuffle)}
                                        className={`touch-button w-12 h-12 md:w-16 md:h-16 rounded-full border-2 flex items-center justify-center shadow-lg ${isShuffle ? 'bg-pink-900/80 border-pink-600' : 'bg-gray-800/80 border-gray-600'}`}
                                    >
                                        <IconShuffle size={isMobile ? 20 : 24} className={`${isShuffle ? 'text-pink-400' : 'text-gray-400'}`} />
                                    </button>
                                )}

                                {/* BOT√ÉO PLAYLIST MODAL - VERDE COM "30" */}
                                <button
                                    onClick={openPlaylistModal}
                                    className="touch-button w-12 h-12 md:w-16 md:h-16 rounded-full bg-gradient-to-br from-green-700 to-green-900 border-2 border-green-500 flex items-center justify-center shadow-lg relative hover:from-green-600 hover:to-green-800 transition-all duration-300 group"
                                >
                                    <IconPlaylist size={isMobile ? 20 : 24} className="text-white group-hover:text-green-300" />
                                    <span className="absolute -top-1 -right-1 bg-green-500 text-black text-xs font-bold rounded-full w-5 h-5 md:w-6 md:h-6 flex items-center justify-center border border-green-300 group-hover:bg-green-400 group-hover:scale-110 transition-all">
                                        30
                                    </span>
                                </button>

                                {/* Bot√£o Playlist Autom√°tica */}
                                <button
                                    onClick={startAutoPlaylist}
                                    className="touch-button w-12 h-12 md:w-16 md:h-16 rounded-full bg-gradient-to-br from-cyan-700 to-blue-700 border-2 border-cyan-500 flex items-center justify-center shadow-lg"
                                >
                                    <IconPlay size={isMobile ? 20 : 24} className="text-white" />
                                    <span className="absolute text-[8px] md:text-[10px] font-bold text-white bottom-1">AUTO</span>
                                </button>

                                {/* BOT√ÉO NUCLEAR */}
                                <button
                                    onClick={toggleExplosion}
                                    className={`touch-button w-14 h-14 md:w-20 md:h-20 rounded-full nuclear-btn flex items-center justify-center shadow-2xl relative ${explosionMode ? 'animate-pulse dangerPulse' : ''}`}
                                    style={explosionMode ? { animation: 'dangerPulse 0.5s infinite' } : {}}
                                >
                                    <IconNuclear size={isMobile ? 24 : 32} className="text-white" />
                                    <span className="absolute text-[10px] md:text-xs font-bold text-white bottom-1">NUKE</span>
                                </button>
                            </div>

                            {/* Linha 2: Sliders e Info - Escondido em mobile quando menu aberto */}
                            {(!isMobile || !mobileMenuOpen) && (
                                <div className="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6">
                                    {/* Volume - Escondido em mobile */}
                                    {!isMobile && (
                                        <div className="space-y-2">
                                            <div className="flex items-center justify-between">
                                                <label className="text-green-400 flex items-center gap-2">
                                                    <IconVolume className="w-5 h-5" />
                                                    VOLUME
                                                </label>
                                                <span className="text-cyan-400 font-bold">{volume}%</span>
                                            </div>
                                            <input
                                                type="range"
                                                min="0"
                                                max="100"
                                                value={volume}
                                                onChange={handleVolume}
                                                className="w-full h-2 bg-gray-800 rounded-lg"
                                            />
                                        </div>
                                    )}

                                    {/* Tracking - Escondido em mobile */}
                                    {!isMobile && (
                                        <div className="space-y-2">
                                            <div className="flex items-center justify-between">
                                                <label className="text-purple-400">TRACKING</label>
                                                <span className="text-cyan-400 font-bold">{tracking}%</span>
                                            </div>
                                            <input
                                                type="range"
                                                min="0"
                                                max="100"
                                                value={tracking}
                                                onChange={handleTracking}
                                                className="w-full h-2 bg-gray-800 rounded-lg"
                                            />
                                        </div>
                                    )}

                                    {/* Info do Canal - Sempre vis√≠vel */}
                                    <div className="bg-black/50 p-3 md:p-4 rounded-lg border border-gray-700">
                                        <div className="text-sm text-gray-400 mb-1">CHANNEL INFO</div>
                                        <div className="text-xl md:text-2xl text-green-400 font-bold">{currentChannel + 1} / 30</div>
                                        <div className="text-base md:text-lg text-cyan-300 truncate">{videos[currentChannel].title}</div>
                                        <div className="text-xs text-gray-500 mt-2 flex flex-wrap gap-2">
                                            <span>{isShuffle ? 'üîÄ Shuffle' : '‚ñ∂Ô∏è Sequential'}</span>
                                            <span>{isPlaying ? 'üìÄ Playing' : '‚è∏Ô∏è Paused'}</span>
                                            {playlistActive && <span>üéµ Playlist Active</span>}
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* Status Bar - Escondido em mobile quando menu aberto */}
                            {(!isMobile || !mobileMenuOpen) && (
                                <div className="mt-4 md:mt-6 pt-3 md:pt-4 border-t border-gray-800">
                                    <div className="flex flex-wrap items-center justify-between text-xs md:text-sm">
                                        <div className="flex items-center gap-2 md:gap-4">
                                            <span className={`px-2 md:px-3 py-1 rounded-full ${explosionMode ? 'bg-red-900/50 text-red-400 animate-pulse' : 'bg-green-900/50 text-green-400'}`}>
                                                {explosionMode ? '‚ö†Ô∏è CRITICAL MODE' : '‚úÖ SYSTEM OK'}
                                            </span>
                                            <span className="text-gray-400">
                                                {isOn ? 'Transmission Active' : 'System Offline'}
                                            </span>
                                        </div>
                                        <div className="text-gray-500 font-mono text-xs">
                                            {new Date().toLocaleTimeString('pt-BR')} | CYBER-GOTH 4.0
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>

                        {/* Footer */}
                        <div className="mt-2 md:mt-4 text-center text-xs text-gray-600 pb-2">
                            <div className="hidden md:block">30 CYBER-GOTH TRANSMISSIONS ‚Ä¢ 2024 ‚Ä¢ DESIGNED FOR DESKTOP & MOBILE</div>
                            <div className="md:hidden">Swipe screen to change channel ‚Ä¢ Tap buttons to control</div>
                        </div>
                    </div>

                    {/* Modal de Playlist */}
                    <PlaylistModal
                        isOpen={showPlaylistModal}
                        onClose={closePlaylistModal}
                        videos={videos}
                        currentChannel={currentChannel}
                        onSelectTrack={selectTrack}
                    />

                    {/* Aviso de Explos√£o */}
                    {explosionMode && (
                        <div className="fixed inset-0 flex items-center justify-center z-50 pointer-events-none">
                            <div className="text-3xl md:text-6xl font-bold text-red-500 animate-pulse text-center px-4" style={dangerStyle}>
                                ‚ö° SYSTEM MELTDOWN ‚ö°
                            </div>
                        </div>
                    )}
                </>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
